{
    "openapi": "3.0.0",
    "info": {
        "title": "Tablero de incidentes",
        "description": "ducumentacion de la api tablero de incidentes",
        "version": "1.0.0",
        "servers": [
            "http://localhost:4000"
        ]
    },
    "paths": {
        "/communications/all": {
            "get": {
                "tags": [
                    "Comunicados"
                ],
                "summary": null,
                "description": "Optener todos los comunicados.",
                "responses": {
                    "200": {
                        "description": "Retorna todos los comunicados almacenados en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "allOf": [
                                                    {
                                                        "$ref": "#/components/schemas/comunicados"
                                                    }
                                                ],
                                                "properties": {
                                                    "servicio": {
                                                        "$ref": "#/components/schemas/servicios"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/communications/create": {
            "post": {
                "tags": [
                    "Comunicados"
                ],
                "summary": null,
                "description": "Crear un nuevo comunicado.",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/definitions/comunicados"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Retorna el nuevo comunicado creado en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/comunicados"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/communications/delete/{id}": {
            "delete": {
                "tags": [
                    "Comunicados"
                ],
                "summary": null,
                "description": "Eliminar un comunicado.",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/id"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retorna el  comunicado eliminado en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/comunicados"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/communications/edit/{id}": {
            "put": {
                "tags": [
                    "Comunicados"
                ],
                "summary": null,
                "description": "Editar comunicado.",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/id"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/definitions/comunicados"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Retorna comunicado editado en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/comunicados"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/communications/filter?servicioId={servicioId}&negocio={negocio}&estado={estado}": {
            "get": {
                "tags": [
                    "Comunicados"
                ],
                "summary": null,
                "description": "Optener los comunicados filtrados.",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/negocio"
                    },
                    {
                        "$ref": "#/components/parameters/estado"
                    },
                    {
                        "servicioId": null,
                        "name": "servicioId",
                        "in": "path",
                        "type": "integer",
                        "required": false
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retorna los comunicados que coinciden con la busqueda.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/comunicados"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/incidents/all": {
            "get": {
                "tags": [
                    "Incidentes"
                ],
                "summary": null,
                "description": "Optener todos los incidentes.",
                "responses": {
                    "200": {
                        "description": "Retorna todos los incidentes almacenados en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "allOf": [
                                                    {
                                                        "$ref": "#/components/schemas/incidentes"
                                                    }
                                                ],
                                                "properties": {
                                                    "servicio": {
                                                        "$ref": "#/components/schemas/servicios"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/incidents/create": {
            "post": {
                "tags": [
                    "Incidentes"
                ],
                "summary": null,
                "description": "Crear un nuevo incidente.",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/definitions/incidentes"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Retorna el nuevo incidente creado en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/incidentes"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/incidents/delete/{id}": {
            "delete": {
                "tags": [
                    "Incidentes"
                ],
                "summary": null,
                "description": "Eliminar un incidente.",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/id"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retorna el  incidente eliminado en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/incidentes"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/incidents/edit/{id}": {
            "put": {
                "tags": [
                    "Incidentes"
                ],
                "summary": null,
                "description": "Editar incidente.",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/id"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/definitions/incidentes"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Retorna incidente editado en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/incidentes"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/services/all": {
            "get": {
                "tags": [
                    "Servicios"
                ],
                "summary": null,
                "description": "Optener todos los servicios.",
                "responses": {
                    "200": {
                        "description": "Retorna todos los servicios almacenados en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/servicios"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/services/create": {
            "post": {
                "tags": [
                    "Servicios"
                ],
                "summary": null,
                "description": "Crear un nuevo servicio.",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/definitions/servicios"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Retorna el nuevo servicio creado en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/servicios"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/services/delete/{id}": {
            "delete": {
                "tags": [
                    "Servicios"
                ],
                "summary": null,
                "description": "Eliminar un servicio.",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/id"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retorna el  servicio eliminado en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/servicios"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/services/edit/{id}": {
            "put": {
                "tags": [
                    "Servicios"
                ],
                "summary": null,
                "description": "Editar servicio.",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/id"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/definitions/servicios"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Retorna servicio editado en BD.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/servicios"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/services/filter?nombre={nombre}&negocio={negocio}&estado={estado}": {
            "get": {
                "tags": [
                    "Servicios"
                ],
                "summary": null,
                "description": "Optener los servicios filtrados.",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/nombre"
                    },
                    {
                        "$ref": "#/components/parameters/negocio"
                    },
                    {
                        "$ref": "#/components/parameters/estado"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retorna los servicios que coinciden con la busqueda.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/servicios"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/services/search?wanted={wanted}": {
            "get": {
                "tags": [
                    "Servicios"
                ],
                "summary": null,
                "description": "Optener los servicios y comunicados filtrados por nombre del servicio o negocio.",
                "parameters": [
                    {
                        "name": "wanted",
                        "in": "path",
                        "type": "string",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retorna los servicios y comunicados que coinciden con la busqueda.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/servicios"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "parameters": {
            "id": {
                "name": "id",
                "in": "path",
                "type": "integer",
                "required": true
            },
            "nombre": {
                "name": "nombre",
                "in": "path",
                "type": "string",
                "required": false
            },
            "estado": {
                "name": "estado",
                "in": "path",
                "type": "string",
                "required": false
            },
            "negocio": {
                "name": "negocio",
                "in": "path",
                "type": "string",
                "required": false
            },
            "tipo": {
                "name": "tipo",
                "in": "path",
                "type": "integer",
                "required": false
            },
            "serviceId": {
                "name": "id",
                "in": "path",
                "type": "integer",
                "required": true,
                "description": "ID de servicio."
            }
        },
        "definitions": {
            "comunicados": {
                "type": "object",
                "properties": {
                    "descripcion": {
                        "name": "descripcion",
                        "type": "string",
                        "description": "Descripcion de comunicado.",
                        "required": true,
                        "example": "Descripcion de comunicado"
                    },
                    "estado": {
                        "name": "estado",
                        "type": "string",
                        "description": "Estado de comunicado.",
                        "required": true,
                        "example": "critico"
                    },
                    "tipo": {
                        "name": "tipo",
                        "type": "string",
                        "description": "Tipo del comunicado.",
                        "required": true,
                        "example": "Informativo"
                    },
                    "negocio": {
                        "name": "negocio",
                        "type": "string",
                        "description": "Negocio.",
                        "required": true,
                        "example": "Novaventa"
                    },
                    "zonaHoraria": {
                        "name": "zonaHoraria",
                        "type": "string",
                        "description": "Zona horaria.",
                        "required": true,
                        "example": "Bogota"
                    },
                    "fechaInicio": {
                        "type": "string",
                        "description": "Fecha en que inicio el comunicado.",
                        "required": true,
                        "example": "2023-06-11"
                    },
                    "horaInicio": {
                        "type": "string",
                        "description": "Hora en que inicio el comunicado.",
                        "required": true,
                        "example": "10:30:00"
                    },
                    "fechaFin": {
                        "type": "string",
                        "description": "Fecha en que finalizo el comunicado.",
                        "required": true,
                        "example": "2023-06-12"
                    },
                    "horaFin": {
                        "type": "string",
                        "description": "Hora en que finalizo el comunicado.",
                        "required": true,
                        "example": "11:30:00"
                    },
                    "usuarioCreador": {
                        "type": "string",
                        "description": "Usuario que crea el comunicado.",
                        "required": true,
                        "example": 1
                    },
                    "usuarioEditor": {
                        "type": "string",
                        "description": "Usuario que edita el comunicado.",
                        "required": false,
                        "example": 1
                    },
                    "servicioId": {
                        "name": "servicioId",
                        "type": "integer",
                        "description": "ID del servicio.",
                        "required": true,
                        "example": 1
                    }
                }
            },
            "incidentes": {
                "type": "object",
                "properties": {
                    "tipo": {
                        "type": "string",
                        "description": "Tipo de incidente.",
                        "required": true,
                        "example": "sap"
                    },
                    "cantidad": {
                        "type": "integer",
                        "description": "Numero de afectacion.",
                        "required": true,
                        "example": 9
                    },
                    "servicioId": {
                        "type": "integer",
                        "description": "ID del servicio.",
                        "required": true,
                        "example": 1
                    }
                }
            },
            "servicios": {
                "type": "object",
                "properties": {
                    "nombre": {
                        "name": "nombre",
                        "type": "string",
                        "description": "Nombre del servicio.",
                        "required": true,
                        "example": "Servicio1"
                    },
                    "descripcion": {
                        "name": "descripcion",
                        "type": "string",
                        "description": "Descripcion de servicio.",
                        "required": true,
                        "example": "Descripcion de servicio"
                    },
                    "estado": {
                        "name": "estado",
                        "type": "string",
                        "description": "Estado de servicio.",
                        "required": true,
                        "example": "critico"
                    },
                    "negocio": {
                        "name": "negocio",
                        "type": "string",
                        "description": "Negocio.",
                        "required": true,
                        "example": "Novaventa"
                    },
                    "usuarioCreador": {
                        "type": "string",
                        "description": "Usuario que crea el servicio.",
                        "required": true,
                        "example": 1
                    },
                    "usuarioEditor": {
                        "type": "string",
                        "description": "Usuario que edita el servicio.",
                        "required": false,
                        "example": 1
                    }
                }
            }
        },
        "schemas": {
            "comunicados": {
                "allOf": [
                    {
                        "$ref": "#/components/definitions/comunicados"
                    }
                ],
                "properties": {
                    "id": {
                        "name": "id",
                        "type": "integer",
                        "description": "ID del comunicado.",
                        "required": false,
                        "example": 1
                    },
                    "activo": {
                        "type": "boolean",
                        "description": "Esta activo?.",
                        "required": false,
                        "example": true
                    }
                }
            },
            "incidentes": {
                "allOf": [
                    {
                        "$ref": "#/components/definitions/incidentes"
                    }
                ],
                "properties": {
                    "id": {
                        "name": "id",
                        "type": "integer",
                        "description": "ID del incidente.",
                        "required": false,
                        "example": 1
                    },
                    "activo": {
                        "type": "boolean",
                        "description": "Esta activo?.",
                        "required": false,
                        "example": true
                    }
                }
            },
            "servicios": {
                "allOf": [
                    {
                        "$ref": "#/components/definitions/servicios"
                    }
                ],
                "properties": {
                    "id": {
                        "name": "id",
                        "type": "integer",
                        "description": "ID del servicio.",
                        "required": false,
                        "example": 1
                    },
                    "activo": {
                        "type": "boolean",
                        "description": "Esta activo?.",
                        "required": false,
                        "example": true
                    }
                }
            }
        }
    },
    "tags": [
        {
            "name": "Comunicados",
            "description": null
        },
        {
            "name": "Incidentes",
            "description": null
        },
        {
            "name": "Servicios",
            "description": null
        }
    ]
}